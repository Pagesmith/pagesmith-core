/*jsl:ignoreall*/var cs_ideogram_defaults={chr:"",len:0,bands:[],width:0.2,karyo_set:[],start:1,end:0,colours:{gneg:"#fff",gpos66:"#808080",gpos50:"#999",gpos75:"#666",gpos100:"#000",acen:"#666",gvar:"#ddd",stalk:"#666",tip:"#666",gpos33:"#404040",gpos25:"#ccc"},edge_colour:"#000",empty_colour:"#eee"};Raphael.fn.cs_ideogram_render=function(){var e=this.set(),a=this.cs_ideogram.width,b="Chr "+this.cs_ideogram.chr,c=this.cs_ideogram.end,g=this.cs_ideogram.bands,i=0,f,h,d;if("undefined"!==typeof g)for(f=g.length;f;){f--;h=parseInt(g[f].start,10);if(c<this.cs_ideogram.start)break;if(h<=this.cs_ideogram.end){d=h;if(d<this.cs_ideogram.start)d=this.cs_ideogram.start;if(c>this.cs_ideogram.end)c=this.cs_ideogram.end;switch(g[f].stain){case "acen":d=i?[d,{val:b,off:-a},c,b,d,{val:b,off:a}]:[c,{val:b,off:-a},d,b,c,{val:b,off:a}];i=1-i;break;case "stalk":d=[d,{val:b,off:-a},(3*d+c)/4,{val:b,off:-a/2},(d+3*c)/4,{val:b,off:-a/2},c,{val:b,off:-a},c,{val:b,off:a},(d+3*c)/4,{val:b,off:a/2},(3*d+c)/4,{val:b,off:a/2},d,{val:b,off:a}];break;default:d=[d,{val:b,off:-a},c,{val:b,off:-a},c,{val:b,off:a},d,{val:b,off:a}]}c=this.cs_ideogram.colours[g[f].stain];d=this.cs_add_poly({pts:d,stroke:this.cs_ideogram.edge_colour,opts:{"stroke-width":0.5},fill:c});e.push(d)}c=h-1}if(c>this.cs_ideogram.start){if(c>this.cs_ideogram.end)c=this.cs_ideogram.end;d=this.cs_add_poly({pts:[this.cs_ideogram.start,{val:b,off:-a},c,{val:b,off:-a},c,{val:b,off:a},this.cs_ideogram.start,{val:b,off:a}],stroke:this.cs_ideogram.edge_colour,opts:{"stroke-width":0.5},fill:this.cs_ideogram.empty_colour});e.push(d)}this.cs_ideogram.karyo_set=e};Raphael.fn.cs_ideogram_init=function(e,a,b){this.cs_ideogram=cs_ideogram_defaults;this.cs_ideogram.code=e;this.cs_ideogram.chr=a.name;this.cs_ideogram.bands=a.bands;this.cs_ideogram.len=parseInt(a.len,10);this.cs_ideogram.start=1;this.cs_ideogram.end=this.cs_ideogram.len;this.cs_ideogram.tracks=b};Raphael.fn.cs_ideogram_generate_axis=function(e){this.cs_ideogram.len=this.cs_ideogram.end-this.cs_ideogram.start+1;var a=this.cs_ideogram.len,b=Math.pow(10,Math.floor(Math.log(a)/Math.LN10));5>a/b&&(b*=0.5);e={minvalue:this.cs_ideogram.start-e*b,maxvalue:this.cs_ideogram.end+e*b,dir:"+",scaling:"linear",line:"#ccc",label:"",axis_pos:"below",major:b,minor:5,label_scale:1E6,label_dp:0,label_suffix:"Mb"};if(5E6>a)e.label_dp=1;if(5E5>a)e.label_dp=0,e.label_scale=1E3,e.label_suffix="Kb";if(5E4>a)e.label_dp=1;if(1E4>a)e.label_dp=0,e.label_scale=1,e.label_suffix="";this.cs_init({object:this.cs_ideogram.code,margins:{top:5,right:10,left:50,bottom:15},xaxis:e,yaxis:{minvalue:0,maxvalue:1,scaling:"discrete",line:"#ccc",values:this.cs_ideogram.tracks,label:"",axis_pos:"left"}})};