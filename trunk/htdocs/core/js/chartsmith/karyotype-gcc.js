/* jshint ignore:start */
(function(){var m={chromosomes:[],width:0.2,karyo_set:[],colours:{gneg:"#fff",gpos66:"#808080",gpos50:"#999",gpos75:"#666",gpos100:"#000",acen:"#666",gvar:"#ddd",stalk:"#666",tip:"#666",gpos33:"#404040",gpos25:"#ccc"},edge_colour:"#000",empty_colour:"#eee",max_len:0,valid_x:{}};Raphael.fn.cs_karyotype_render=function(){var h,e,c,d,a,b,f,g,k,l;if(this.cs_karyotype.chromosomes.length){h=this.set();for(e=this.cs_karyotype.chromosomes.length;e;e){e--;c=this.cs_karyotype.width;d=this.cs_karyotype.chromosomes[e];a=d.name;b=parseInt(d.len,10);d=d.bands;f=0;if("undefined"!==typeof d)for(g=d.length;g;g){g--;k=parseInt(d[g].start,10);switch(d[g].stain){case "acen":b=f?[{val:a,off:-c},k,a,b,{val:a,off:c},k]:[{val:a,off:-c},b,a,k,{val:a,off:c},b];f=1-f;break;case "stalk":b=[{val:a,off:-c/2},k,{val:a,off:-c/2},b,{val:a,off:c/2},b,{val:a,off:c/2},k];break;default:b=[{val:a,off:-c},k,{val:a,off:-c},b,{val:a,off:c},b,{val:a,off:c},k]}l=this.cs_karyotype.colours[d[g].stain];h.push(this.cs_add_poly({pts:b,stroke:this.cs_karyotype.edge_colour,opts:{"stroke-width":0.5},fill:l}));b=k-1}1<b&&h.push(this.cs_add_poly({pts:[{val:a,off:-c},1,{val:a,off:-c},b,{val:a,off:c},b,{val:a,off:c},1],stroke:this.cs_karyotype.edge_colour,opts:{"stroke-width":0.5},fill:this.cs_karyotype.empty_colour}))}this.cs_karyotype.karyo_set=h}else this.text(100,50,"This species has no karyotype")};Raphael.fn.cs_karyotype_draw_features=function(h,e){var c=[],d=0,a=0,b,f,g;for(b=h.length;b;b)b--,f=h[b],this.cs_karyotype.valid_x[f.chr]?(d++,g=parseInt(f.strand,10),c.push({x:{val:f.chr,off:0.25*g},y:(parseInt(f.start,10)+parseInt(f.end,10))/2,shape:0>g?">":"<",label:f.label,value:f.id})):a++;return{pts:this.cs_add_points(c,e),drawn:d,not_drawn:a}};Raphael.fn.cs_karyotype_init=function(h,e){var c=[],d=0,a,b;this.cs_karyotype=m;this.cs_karyotype.chromosomes=e;this.cs_karyotype.max_len=0;this.cs_karyotype.valid_x=[];if(e.length){for(a=e.length;a;a)a--,this.cs_karyotype.valid_x[e[a].name]=1,c.unshift(e[a].name),b=parseInt(e[a].len,10),b>d&&(d=b);0<d&&(a=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),5>d/a&&(a*=0.5),a={minvalue:-a/10,maxvalue:d+a/10,dir:"+",scaling:"linear",line:"#ccc",label:"Basepairs",axis_pos:"left",major:a,minor:5,label_scale:1E6,label_dp:0,label_suffix:"Mb"},5E6>d&&(a.label_dp=1),5E5>d&&(a.label_dp=0,a.label_scale=1E3,a.label_suffix="Kb"),5E4>d&&(a.label_dp=1),1E4>d&&(a.label_dp=0,a.label_scale=1,a.label_suffix=""),c={object:h,margins:{top:10,right:10,left:50,bottom:40},xaxis:{minvalue:0,maxvalue:1,scaling:"discrete",line:"#ccc",values:c,label:"Chromosome",axis_pos:"below"},yaxis:a},this.cs_init(c));this.cs_karyotype.max_len=d}}})();
/* jshint ignore:end */
